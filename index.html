<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AutoPlat - Automação Educacional</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Terms Modal -->
    <div class="modal active" id="termsModal">
        <div class="modal-content">
            <div class="modal-icon">⚠️</div>
            <h3 class="modal-title">Termos de Uso - AutoPlat</h3>
            <div class="terms-content">
                <div class="info-box" style="text-align: left; margin-bottom: 20px;">
                    <p><strong>📋 LEIA ATENTAMENTE ANTES DE CONTINUAR:</strong></p>
                    <br>
                    <p>🔒 <strong>ACESSO À CONTA:</strong> Nossa equipe terá acesso às suas credenciais do @escola.pr.gov.br exclusivamente para realizar as automações solicitadas.</p>
                    <br>
                    <p>📝 <strong>DADOS VERÍDICOS:</strong> Você deve fornecer informações reais e precisas. Contas com dados incorretos serão <strong>BLOQUEADAS E EXCLUÍDAS</strong> permanentemente.</p>
                    <br>
                    <p>⏳ <strong>PRAZOS:</strong> O processamento pode demorar devido à alta demanda. Nossa equipe é pequena e trabalha manualmente em cada solicitação.</p>
                    <br>
                    <p>🛡️ <strong>SEGURANÇA:</strong> Suas credenciais são criptografadas e armazenadas com segurança. Apenas administradores autorizados têm acesso.</p>
                    <br>
                    <p>🚫 <strong>PROIBIÇÕES:</strong> É proibido solicitar automações para atividades ilegais ou que violem os termos das plataformas educacionais.</p>
                </div>
                
                <div class="terms-checkbox">
                    <input type="checkbox" id="acceptTerms">
                    <label for="acceptTerms">Li e concordo com os termos de uso acima</label>
                </div>
            </div>
            <button class="btn" id="acceptTermsBtn" disabled onclick="acceptTerms()">Aceitar e Continuar</button>
        </div>
    </div>

    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-logo">
            <span class="nav-logo-icon">🚀</span>
            <span>AutoPlat</span>
        </div>
        <div class="nav-menu">
            <div class="nav-btn active" onclick="showPage('dashboard')" id="navDashboard" style="display: none;">
                <span>🏠</span>
                <span>Início</span>
            </div>
            <div class="nav-btn" onclick="showPage('reviews')" id="navReviews" style="display: none;">
                <span>⭐</span>
                <span>Avaliações</span>
            </div>
            <div class="nav-btn" onclick="showPage('admin')" id="navAdmin" style="display: none;">
                <span>🔐</span>
                <span>Admin</span>
            </div>
            <div class="user-avatar" onclick="showUserMenu()" id="userAvatar" style="display: none;">
                👤
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Login Page -->
        <div class="auth-page active" id="loginPage">
            <div class="auth-card">
                <div class="auth-header">
                    <div class="auth-icon">🔐</div>
                    <h2 class="auth-title">Bem-vindo de volta</h2>
                    <p class="auth-subtitle">Entre para acessar a plataforma</p>
                </div>
                
                <div class="info-box">
                    ⚠️ Use suas credenciais reais do @escola.pr.gov.br. Contas com dados falsos serão bloqueadas.
                </div>

                <div class="input-group">
                    <label>📧 Email</label>
                    <input type="email" id="loginEmail" placeholder="seu@escola.pr.gov.br">
                </div>
                <div class="input-group">
                    <label>🔒 Senha</label>
                    <input type="password" id="loginPassword" placeholder="Digite sua senha">
                </div>
                <button class="btn" onclick="login()">Entrar na Plataforma</button>
                <button class="btn btn-secondary" onclick="showPage('register')">Criar Nova Conta</button>
            </div>
        </div>

        <!-- Register Page -->
        <div class="auth-page" id="registerPage">
            <div class="auth-card">
                <div class="auth-header">
                    <div class="auth-icon">✨</div>
                    <h2 class="auth-title">Criar Conta</h2>
                    <p class="auth-subtitle">Junte-se à nossa comunidade</p>
                </div>
                
                <div class="profile-upload">
                    <div class="profile-preview" onclick="document.getElementById('profileImageInput').click()">
                        <span id="profilePreviewIcon">📷</span>
                        <img id="profilePreviewImg" style="display: none;">
                    </div>
                    <input type="file" id="profileImageInput" accept="image/*" onchange="previewProfileImage(event)">
                </div>

                <div class="info-box">
                    🛡️ Use seus dados reais do @escola.pr.gov.br. Contas com informações falsas serão excluídas.
                </div>

                <div class="input-group">
                    <label>👤 Nome Completo (Real)</label>
                    <input type="text" id="regFullName" placeholder="João Silva">
                </div>
                <div class="input-group">
                    <label>🎒 Número de Matrícula</label>
                    <input type="text" id="regRegistration" placeholder="202411234567">
                </div>
                <div class="input-group">
                    <label>🏫 Escola</label>
                    <input type="text" id="regSchool" placeholder="Colégio Estadual do Paraná">
                </div>
                <div class="input-group">
                    <label>📧 Email @escola.pr.gov.br</label>
                    <input type="email" id="regEmail" placeholder="seu@escola.pr.gov.br">
                </div>
                <div class="input-group">
                    <label>🔒 Senha</label>
                    <input type="password" id="regPassword" placeholder="Crie uma senha segura">
                </div>
                <button class="btn" onclick="register()">Criar Conta</button>
                <button class="btn btn-secondary" onclick="showPage('login')">Já tenho conta</button>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div class="dashboard-page" id="dashboardPage">
            <div class="welcome-banner">
                <div class="welcome-content">
                    <h2>👋 Bem-vindo, <span id="welcomeUserName">Usuário</span>!</h2>
                    <p>Solicite automações para suas plataformas educacionais</p>
                </div>
                <div class="welcome-stats">
                    <div class="stat-card">
                        <div class="stat-icon">📋</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalRequests">0</div>
                            <div class="stat-label">Solicitações</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">✅</div>
                        <div class="stat-info">
                            <div class="stat-number" id="completedRequests">0</div>
                            <div class="stat-label">Concluídas</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <div class="section-title">
                        <span>🎓</span>
                        <span>Plataformas Disponíveis</span>
                    </div>
                </div>

                <div class="platforms-grid">
                    <div class="platform-card" onclick="openPlatformRequest('Quizizz', '📝')">
                        <span class="platform-icon">📝</span>
                        <h3 class="platform-name">Quizizz</h3>
                        <p class="platform-desc">Plataforma interativa de quizzes e avaliações gamificadas.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Quizzes</span>
                            <span class="feature-tag">Provas</span>
                            <span class="feature-tag">Avaliações</span>
                        </div>
                    </div>

                    <div class="platform-card" onclick="openPlatformRequest('Wayground', '🌐')">
                        <span class="platform-icon">🌐</span>
                        <h3 class="platform-name">Wayground</h3>
                        <p class="platform-desc">Plataforma educacional completa com cursos e módulos.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Cursos</span>
                            <span class="feature-tag">Módulos</span>
                            <span class="feature-tag">Trilhas</span>
                        </div>
                    </div>

                    <div class="platform-card" onclick="openPlatformRequest('Redação Paraná', '✍️')">
                        <span class="platform-icon">✍️</span>
                        <h3 class="platform-name">Redação Paraná</h3>
                        <p class="platform-desc">Sistema de produção e correção de redações ENEM.</p>
                        <div class="platform-features">
                            <span class="feature-tag">ENEM</span>
                            <span class="feature-tag">Vestibular</span>
                            <span class="feature-tag">Dissertação</span>
                        </div>
                    </div>

                    <div class="platform-card" onclick="openPlatformRequest('Khan Academy', '🎓')">
                        <span class="platform-icon">🎓</span>
                        <h3 class="platform-name">Khan Academy</h3>
                        <p class="platform-desc">Plataforma mundial de educação gratuita com exercícios.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Matemática</span>
                            <span class="feature-tag">Ciências</span>
                            <span class="feature-tag">Exercícios</span>
                        </div>
                    </div>

                    <div class="platform-card premium" onclick="openPlatformRequest('Inglês Paraná', '🗣️')">
                        <span class="platform-icon">🗣️</span>
                        <h3 class="platform-name">Inglês Paraná ⭐</h3>
                        <p class="platform-desc">Principal plataforma de aprendizado de inglês oficial.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Vocabulário</span>
                            <span class="feature-tag">Gramática</span>
                            <span class="feature-tag">Listening</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- My Requests -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title">
                        <span>📋</span>
                        <span>Minhas Solicitações</span>
                    </div>
                </div>
                <div id="userRequestsContainer">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Reviews Page -->
        <div class="dashboard-page" id="reviewsPage">
            <div class="section">
                <div class="section-header">
                    <div class="section-title">
                        <span>⭐</span>
                        <span>Avaliações da Plataforma</span>
                    </div>
                </div>

                <div style="text-align: center; margin-bottom: 32px;">
                    <button class="btn" onclick="openReviewModal()" style="max-width: 300px; margin: 0 auto;">
                        ⭐ Avaliar Plataforma
                    </button>
                </div>

                <div class="reviews-container" id="reviewsContainer">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div class="dashboard-page" id="adminPage">
            <div class="admin-section">
                <div class="section-title" style="margin-bottom: 24px;">
                    <span>🔐</span>
                    <span>Painel de Administrador</span>
                </div>

                <div class="admin-tabs">
                    <div class="admin-tab active" onclick="switchAdminTab('users')">👥 Usuários</div>
                    <div class="admin-tab" onclick="switchAdminTab('requests')">📋 Solicitações</div>
                    <div class="admin-tab" onclick="switchAdminTab('reviews')">⭐ Avaliações</div>
                    <div class="admin-tab" onclick="switchAdminTab('analytics')">📊 Analytics</div>
                </div>

                <!-- Users Tab -->
                <div class="admin-content active" id="adminUsersTab">
                    <div class="search-box">
                        <input type="text" id="userSearch" placeholder="🔍 Buscar usuário..." oninput="searchUsers()">
                    </div>
                    <div class="users-grid" id="adminUsersGrid">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Requests Tab -->
                <div class="admin-content" id="adminRequestsTab">
                    <div class="search-box">
                        <input type="text" id="requestSearch" placeholder="🔍 Buscar solicitação..." oninput="searchRequests()">
                    </div>
                    <div class="requests-filters">
                        <select id="statusFilter" onchange="filterRequests()">
                            <option value="all">Todos os status</option>
                            <option value="pending">Pendentes</option>
                            <option value="approved">Aprovados</option>
                            <option value="completed">Concluídos</option>
                            <option value="rejected">Recusados</option>
                        </select>
                    </div>
                    <div id="adminRequestsContainer">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div class="admin-content" id="adminReviewsTab">
                    <div class="admin-actions">
                        <button class="btn" onclick="openFakeReviewModal()">
                            ➕ Criar Avaliação Falsa
                        </button>
                    </div>
                    <div class="reviews-container" id="adminReviewsContainer">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div class="admin-content" id="adminAnalyticsTab">
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <div class="analytics-icon">👥</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="totalUsers">0</div>
                                <div class="analytics-label">Total de Usuários</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-icon">📋</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="totalRequestsAdmin">0</div>
                                <div class="analytics-label">Total de Solicitações</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-icon">⭐</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="totalReviews">0</div>
                                <div class="analytics-label">Total de Avaliações</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-icon">📈</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="completionRate">0%</div>
                                <div class="analytics-label">Taxa de Conclusão</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="generalModal">
        <div class="modal-content" id="modalContent">
            <div class="modal-icon" id="modalIcon">✅</div>
            <h3 class="modal-title" id="modalTitle">Título</h3>
            <p class="modal-message" id="modalMessage">Mensagem</p>
            <button class="btn" onclick="closeModal()">Entendi</button>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div class="modal" id="userProfileModal">
        <div class="modal-content profile-modal-content">
            <div class="modal-icon" id="profileModalIcon">👤</div>
            <h3 class="modal-title" id="profileModalName">Nome do Usuário</h3>
            <div class="profile-details" id="profileDetails"></div>
            <button class="btn" onclick="closeUserProfileModal()">Fechar</button>
        </div>
    </div>

    <!-- Platform Request Modal -->
    <div class="modal" id="platformRequestModal">
        <div class="modal-content">
            <div class="modal-icon" id="platformIcon">🌐</div>
            <h3 class="modal-title" id="platformTitle">Plataforma</h3>
            <p class="modal-message">Descreva suas credenciais e detalhes para a automação:</p>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>📧 Email/Usuário da Plataforma</label>
                    <input type="text" id="platformUsername" placeholder="Seu email ou usuário">
                </div>
                <div class="input-group">
                    <label>🔒 Senha da Plataforma</label>
                    <input type="password" id="platformPassword" placeholder="Sua senha">
                </div>
                <div class="input-group">
                    <label>📝 Observações Adicionais</label>
                    <textarea class="form-textarea" id="platformNotes" placeholder="Informações adicionais que possam ajudar..."></textarea>
                </div>
            </div>
            <button class="btn" onclick="submitPlatformRequest()">Enviar Solicitação</button>
            <button class="btn btn-secondary" onclick="closePlatformRequestModal()">Cancelar</button>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <div class="modal-icon">⭐</div>
            <h3 class="modal-title">Avaliar Plataforma</h3>
            <p class="modal-message">Compartilhe sua experiência com a AutoPlat</p>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>⭐ Avaliação</label>
                    <select id="reviewRating" style="width: 100%; padding: 16px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 14px; color: #ffffff; font-size: 16px;">
                        <option value="5">⭐⭐⭐⭐⭐ (5 estrelas)</option>
                        <option value="4">⭐⭐⭐⭐ (4 estrelas)</option>
                        <option value="3">⭐⭐⭐ (3 estrelas)</option>
                        <option value="2">⭐⭐ (2 estrelas)</option>
                        <option value="1">⭐ (1 estrela)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>💬 Comentário</label>
                    <textarea class="form-textarea" id="reviewComment" placeholder="Conte-nos sobre sua experiência..."></textarea>
                </div>
            </div>
            <button class="btn" onclick="submitReview()">Enviar Avaliação</button>
            <button class="btn btn-secondary" onclick="closeReviewModal()">Cancelar</button>
        </div>
    </div>

    <!-- Fake Review Modal -->
    <div class="modal" id="fakeReviewModal">
        <div class="modal-content">
            <div class="modal-icon">🎭</div>
            <h3 class="modal-title">Criar Avaliação Falsa</h3>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>👤 Nome do Usuário</label>
                    <input type="text" id="fakeReviewName" placeholder="Nome fictício">
                </div>
                <div class="input-group">
                    <label>⭐ Avaliação</label>
                    <select id="fakeReviewRating" style="width: 100%; padding: 16px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 14px; color: #ffffff; font-size: 16px;">
                        <option value="5">⭐⭐⭐⭐⭐ (5 estrelas)</option>
                        <option value="4">⭐⭐⭐⭐ (4 estrelas)</option>
                        <option value="3">⭐⭐⭐ (3 estrelas)</option>
                        <option value="2">⭐⭐ (2 estrelas)</option>
                        <option value="1">⭐ (1 estrela)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>💬 Comentário</label>
                    <textarea class="form-textarea" id="fakeReviewComment" placeholder="Texto da avaliação..."></textarea>
                </div>
            </div>
            <button class="btn" onclick="submitFakeReview()">Criar Avaliação</button>
            <button class="btn btn-secondary" onclick="closeFakeReviewModal()">Cancelar</button>
        </div>
    </div>

    <!-- User Menu Modal -->
    <div class="modal" id="userMenuModal">
        <div class="modal-content">
            <div class="modal-icon">👤</div>
            <h3 class="modal-title" id="userMenuName">Menu</h3>
            <div style="margin: 24px 0;">
                <button class="btn" onclick="openProfileEdit()">✏️ Editar Perfil</button>
                <button class="btn btn-secondary" onclick="logout()" style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); border: none; margin-top: 12px;">🚪 Sair</button>
            </div>
            <button class="btn btn-secondary" onclick="closeUserMenuModal()">Fechar</button>
        </div>
    </div>

    <!-- Profile Edit Modal -->
    <div class="modal" id="profileEditModal">
        <div class="modal-content profile-modal-content">
            <div class="modal-icon">✏️</div>
            <h3 class="modal-title">Editar Perfil</h3>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>👤 Nome Completo</label>
                    <input type="text" id="editFullName" placeholder="Seu nome completo">
                </div>
                <div class="input-group">
                    <label>🎒 Número de Matrícula</label>
                    <input type="text" id="editRegistration" placeholder="Sua matrícula">
                </div>
                <div class="input-group">
                    <label>🏫 Escola</label>
                    <input type="text" id="editSchool" placeholder="Sua escola">
                </div>
                <div class="profile-upload">
                    <div class="profile-preview" onclick="document.getElementById('editProfileImageInput').click()">
                        <span id="editProfilePreviewIcon">📷</span>
                        <img id="editProfilePreviewImg" style="display: none;">
                    </div>
                    <input type="file" id="editProfileImageInput" accept="image/*" onchange="previewEditProfileImage(event)" style="display: none;">
                </div>
            </div>
            <button class="btn" onclick="updateProfile()">Salvar Alterações</button>
            <button class="btn btn-secondary" onclick="closeProfileEditModal()">Cancelar</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
