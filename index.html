<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AutoPlat - Automa√ß√£o Educacional</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="logo.png">
</head>
<body>
    <!-- Terms Modal -->
    <div class="modal active" id="termsModal">
        <div class="modal-content">
            <div class="modal-icon">‚ö†Ô∏è</div>
            <h3 class="modal-title">Termos de Uso - AutoPlat</h3>
            <div class="terms-content">
                <div class="info-box" style="text-align: left; margin-bottom: 20px;">
                    <p><strong>üìã LEIA ATENTAMENTE ANTES DE CONTINUAR:</strong></p>
                    <br>
                    <p>üîí <strong>ACESSO √Ä CONTA:</strong> Nossa equipe ter√° acesso √†s suas credenciais do @escola.pr.gov.br exclusivamente para realizar as automa√ß√µes solicitadas.</p>
                    <br>
                    <p>üìù <strong>DADOS VER√çDICOS:</strong> Voc√™ deve fornecer informa√ß√µes reais e precisas. Contas com dados incorretos ser√£o <strong>BLOQUEADAS E EXCLU√çDAS</strong> permanentemente.</p>
                    <br>
                    <p>‚è≥ <strong>APROVA√á√ÉO DA CONTA:</strong> Sua conta precisa ser aprovada por um administrador antes de fazer solicita√ß√µes.</p>
                    <br>
                    <p>üõ°Ô∏è <strong>SEGURAN√áA:</strong> Suas credenciais s√£o criptografadas e armazenadas com seguran√ßa. Apenas administradores autorizados t√™m acesso.</p>
                </div>
                
                <div class="terms-checkbox">
                    <input type="checkbox" id="acceptTerms">
                    <label for="acceptTerms">Li e concordo com os termos de uso acima</label>
                </div>
            </div>
            <button class="btn" id="acceptTermsBtn" disabled onclick="acceptTerms()">Aceitar e Continuar</button>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Account Pending Banner -->
    <div class="pending-banner" id="pendingBanner" style="display: none;">
        <div class="pending-content">
            <span class="pending-icon">‚è≥</span>
            <span class="pending-text">Sua conta est√° aguardando aprova√ß√£o dos administradores. Voc√™ poder√° fazer solicita√ß√µes assim que for aprovado.</span>
        </div>
    </div>

    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-logo">
            <img src="logo.png" alt="AutoPlat Logo" class="nav-logo-img" onerror="this.style.display='none'">
            <span>AutoPlat</span>
        </div>
        <div class="nav-menu">
            <div class="nav-btn active" onclick="showPage('dashboard')" id="navDashboard" style="display: none;">
                <span>üè†</span>
                <span>In√≠cio</span>
            </div>
            <div class="nav-btn" onclick="showPage('reviews')" id="navReviews" style="display: none;">
                <span>‚≠ê</span>
                <span>Avalia√ß√µes</span>
            </div>
            <div class="nav-btn" onclick="showPage('admin')" id="navAdmin" style="display: none;">
                <span>üîê</span>
                <span>Admin</span>
            </div>
            <div class="user-avatar" onclick="showUserMenu()" id="userAvatar" style="display: none;">
                üë§
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Login Page -->
        <div class="auth-page active" id="loginPage">
            <div class="auth-card">
                <div class="auth-header">
                    <img src="logo.png" alt="AutoPlat Logo" class="auth-logo" onerror="this.style.display='none'">
                    <div class="auth-icon">üîê</div>
                    <h2 class="auth-title">Bem-vindo de volta</h2>
                    <p class="auth-subtitle">Entre para acessar a plataforma</p>
                </div>
                
                <div class="info-box">
                    ‚ö†Ô∏è Use suas credenciais reais do @escola.pr.gov.br. Contas com dados falsos ser√£o bloqueadas.
                </div>

                <div class="input-group">
                    <label>üìß Email</label>
                    <input type="email" id="loginEmail" placeholder="seu@escola.pr.gov.br">
                </div>
                <div class="input-group">
                    <label>üîí Senha</label>
                    <input type="password" id="loginPassword" placeholder="Digite sua senha">
                </div>
                <button class="btn" onclick="login()">Entrar na Plataforma</button>
                <button class="btn btn-secondary" onclick="showPage('register')">Criar Nova Conta</button>
            </div>
        </div>

        <!-- Register Page -->
        <div class="auth-page" id="registerPage">
            <div class="auth-card">
                <div class="auth-header">
                    <img src="logo.png" alt="AutoPlat Logo" class="auth-logo" onerror="this.style.display='none'">
                    <div class="auth-icon">‚ú®</div>
                    <h2 class="auth-title">Criar Conta</h2>
                    <p class="auth-subtitle">Junte-se √† nossa comunidade</p>
                </div>
                
                <div class="profile-upload">
                    <div class="profile-preview" onclick="document.getElementById('profileImageInput').click()">
                        <span id="profilePreviewIcon">üì∑</span>
                        <img id="profilePreviewImg" style="display: none;">
                    </div>
                    <input type="file" id="profileImageInput" accept="image/*" onchange="previewProfileImage(event)">
                </div>

                <div class="info-box">
                    üõ°Ô∏è Use seus dados reais do @escola.pr.gov.br. Contas com informa√ß√µes falsas ser√£o exclu√≠das.
                </div>

                <div class="input-group">
                    <label>üë§ Nome Completo (Real)</label>
                    <input type="text" id="regFullName" placeholder="Jo√£o Silva">
                </div>
                <div class="input-group">
                    <label>üéí N√∫mero de Matr√≠cula</label>
                    <input type="text" id="regRegistration" placeholder="202411234567">
                </div>
                <div class="input-group">
                    <label>üè´ Escola</label>
                    <input type="text" id="regSchool" placeholder="Col√©gio Estadual do Paran√°">
                </div>
                <div class="input-group">
                    <label>üìß Email @escola.pr.gov.br</label>
                    <input type="email" id="regEmail" placeholder="seu@escola.pr.gov.br">
                </div>
                <div class="input-group">
                    <label>üîí Senha</label>
                    <input type="password" id="regPassword" placeholder="Crie uma senha segura">
                </div>
                <button class="btn" onclick="register()">Criar Conta</button>
                <button class="btn btn-secondary" onclick="showPage('login')">J√° tenho conta</button>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div class="dashboard-page" id="dashboardPage">
            <div class="welcome-banner">
                <div class="welcome-content">
                    <h2>üëã Bem-vindo, <span id="welcomeUserName">Usu√°rio</span>!</h2>
                    <p id="welcomeStatus">Carregando status da conta...</p>
                </div>
                <div class="welcome-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalRequests">0</div>
                            <div class="stat-label">Solicita√ß√µes</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <div class="stat-number" id="completedRequests">0</div>
                            <div class="stat-label">Conclu√≠das</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <div class="section-title">
                        <span>üéì</span>
                        <span>Plataformas Dispon√≠veis</span>
                    </div>
                </div>

                <div class="platforms-grid">
                    <div class="platform-card" onclick="openPlatformRequest('Quizizz', 'üìù')">
                        <span class="platform-icon">üìù</span>
                        <h3 class="platform-name">Quizizz</h3>
                        <p class="platform-desc">Plataforma interativa de quizzes e avalia√ß√µes gamificadas.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Quizzes</span>
                            <span class="feature-tag">Provas</span>
                            <span class="feature-tag">Avalia√ß√µes</span>
                        </div>
                    </div>

                    <div class="platform-card" onclick="openPlatformRequest('Wayground', 'üåê')">
                        <span class="platform-icon">üåê</span>
                        <h3 class="platform-name">Wayground</h3>
                        <p class="platform-desc">Plataforma educacional completa com cursos e m√≥dulos.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Cursos</span>
                            <span class="feature-tag">M√≥dulos</span>
                            <span class="feature-tag">Trilhas</span>
                        </div>
                    </div>

                    <div class="platform-card" onclick="openPlatformRequest('Reda√ß√£o Paran√°', '‚úçÔ∏è')">
                        <span class="platform-icon">‚úçÔ∏è</span>
                        <h3 class="platform-name">Reda√ß√£o Paran√°</h3>
                        <p class="platform-desc">Sistema de produ√ß√£o e corre√ß√£o de reda√ß√µes ENEM.</p>
                        <div class="platform-features">
                            <span class="feature-tag">ENEM</span>
                            <span class="feature-tag">Vestibular</span>
                            <span class="feature-tag">Disserta√ß√£o</span>
                        </div>
                    </div>

                    <div class="platform-card" onclick="openPlatformRequest('Khan Academy', 'üéì')">
                        <span class="platform-icon">üéì</span>
                        <h3 class="platform-name">Khan Academy</h3>
                        <p class="platform-desc">Plataforma mundial de educa√ß√£o gratuita com exerc√≠cios.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Matem√°tica</span>
                            <span class="feature-tag">Ci√™ncias</span>
                            <span class="feature-tag">Exerc√≠cios</span>
                        </div>
                    </div>

                    <div class="platform-card premium" onclick="openPlatformRequest('Ingl√™s Paran√°', 'üó£Ô∏è')">
                        <span class="platform-icon">üó£Ô∏è</span>
                        <h3 class="platform-name">Ingl√™s Paran√° ‚≠ê</h3>
                        <p class="platform-desc">Principal plataforma de aprendizado de ingl√™s oficial.</p>
                        <div class="platform-features">
                            <span class="feature-tag">Vocabul√°rio</span>
                            <span class="feature-tag">Gram√°tica</span>
                            <span class="feature-tag">Listening</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- My Requests -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title">
                        <span>üìã</span>
                        <span>Minhas Solicita√ß√µes</span>
                    </div>
                </div>
                <div id="userRequestsContainer">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Reviews Page -->
        <div class="dashboard-page" id="reviewsPage">
            <div class="section">
                <div class="section-header">
                    <div class="section-title">
                        <span>‚≠ê</span>
                        <span>Avalia√ß√µes da Plataforma</span>
                    </div>
                </div>

                <div style="text-align: center; margin-bottom: 32px;">
                    <button class="btn" onclick="openReviewModal()" style="max-width: 300px; margin: 0 auto;">
                        ‚≠ê Avaliar Plataforma
                    </button>
                </div>

                <div class="reviews-container" id="reviewsContainer">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div class="dashboard-page" id="adminPage">
            <div class="admin-section">
                <div class="section-title" style="margin-bottom: 24px;">
                    <span>üîê</span>
                    <span>Painel de Administrador</span>
                </div>

                <div class="admin-tabs">
                    <div class="admin-tab active" onclick="switchAdminTab('users')">üë• Usu√°rios</div>
                    <div class="admin-tab" onclick="switchAdminTab('requests')">üìã Solicita√ß√µes</div>
                    <div class="admin-tab" onclick="switchAdminTab('reviews')">‚≠ê Avalia√ß√µes</div>
                    <div class="admin-tab" onclick="switchAdminTab('notifications')">üì¢ Notifica√ß√µes</div>
                    <div class="admin-tab" onclick="switchAdminTab('analytics')">üìä Analytics</div>
                </div>

                <!-- Users Tab -->
                <div class="admin-content active" id="adminUsersTab">
                    <div class="search-box">
                        <input type="text" id="userSearch" placeholder="üîç Buscar usu√°rio..." oninput="searchUsers()">
                    </div>
                    <div class="users-grid" id="adminUsersGrid">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Requests Tab -->
                <div class="admin-content" id="adminRequestsTab">
                    <div class="search-box">
                        <input type="text" id="requestSearch" placeholder="üîç Buscar solicita√ß√£o..." oninput="searchRequests()">
                    </div>
                    <div class="requests-filters">
                        <select id="statusFilter" onchange="filterRequests()">
                            <option value="all">Todos os status</option>
                            <option value="pending">Pendentes</option>
                            <option value="approved">Aprovados</option>
                            <option value="completed">Conclu√≠dos</option>
                            <option value="rejected">Recusados</option>
                        </select>
                    </div>
                    <div id="adminRequestsContainer">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div class="admin-content" id="adminReviewsTab">
                    <div class="admin-actions">
                        <button class="btn" onclick="openFakeReviewModal()">
                            ‚ûï Criar Avalia√ß√£o Falsa
                        </button>
                    </div>
                    <div class="reviews-container" id="adminReviewsContainer">
                        <div class="spinner"></div>
                    </div>
                </div>

                <!-- Notifications Tab -->
                <div class="admin-content" id="adminNotificationsTab">
                    <div class="notification-management">
                        <h3 style="margin-bottom: 20px; color: #c084fc;">Enviar Notifica√ß√£o Global</h3>
                        <div class="input-group">
                            <label>T√≠tulo da Notifica√ß√£o</label>
                            <input type="text" id="notificationTitle" placeholder="T√≠tulo importante...">
                        </div>
                        <div class="input-group">
                            <label>Mensagem</label>
                            <textarea class="form-textarea" id="notificationMessage" placeholder="Digite a mensagem para todos os usu√°rios..." rows="4"></textarea>
                        </div>
                        <div class="input-group">
                            <label>Tipo de Notifica√ß√£o</label>
                            <select id="notificationType" style="width: 100%; padding: 16px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 14px; color: #ffffff;">
                                <option value="info">‚ÑπÔ∏è Informativa</option>
                                <option value="warning">‚ö†Ô∏è Aviso</option>
                                <option value="success">‚úÖ Sucesso</option>
                                <option value="error">‚ùå Erro</option>
                            </select>
                        </div>
                        <button class="btn" onclick="sendGlobalNotification()">üì¢ Enviar para Todos os Usu√°rios</button>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div class="admin-content" id="adminAnalyticsTab">
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <div class="analytics-icon">üë•</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="totalUsers">0</div>
                                <div class="analytics-label">Total de Usu√°rios</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-icon">üìã</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="totalRequestsAdmin">0</div>
                                <div class="analytics-label">Total de Solicita√ß√µes</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-icon">‚≠ê</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="totalReviews">0</div>
                                <div class="analytics-label">Total de Avalia√ß√µes</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-icon">üìà</div>
                            <div class="analytics-content">
                                <div class="analytics-number" id="completionRate">0%</div>
                                <div class="analytics-label">Taxa de Conclus√£o</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="generalModal">
        <div class="modal-content" id="modalContent">
            <div class="modal-icon" id="modalIcon">‚úÖ</div>
            <h3 class="modal-title" id="modalTitle">T√≠tulo</h3>
            <p class="modal-message" id="modalMessage">Mensagem</p>
            <button class="btn" onclick="closeModal()">Entendi</button>
        </div>
    </div>

    <!-- Platform Request Modal -->
    <div class="modal" id="platformRequestModal">
        <div class="modal-content">
            <div class="modal-icon" id="platformIcon">üåê</div>
            <h3 class="modal-title" id="platformTitle">Plataforma</h3>
            <p class="modal-message">Descreva suas credenciais e detalhes para a automa√ß√£o:</p>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>üìß Email/Usu√°rio da Plataforma</label>
                    <input type="text" id="platformUsername" placeholder="Seu email ou usu√°rio">
                </div>
                <div class="input-group">
                    <label>üîí Senha da Plataforma</label>
                    <input type="password" id="platformPassword" placeholder="Sua senha">
                </div>
                <div class="input-group">
                    <label>üìù Observa√ß√µes Adicionais</label>
                    <textarea class="form-textarea" id="platformNotes" placeholder="Informa√ß√µes adicionais que possam ajudar..."></textarea>
                </div>
            </div>
            <button class="btn" onclick="submitPlatformRequest()">Enviar Solicita√ß√£o</button>
            <button class="btn btn-secondary" onclick="closePlatformRequestModal()">Cancelar</button>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <div class="modal-icon">‚≠ê</div>
            <h3 class="modal-title">Avaliar Plataforma</h3>
            <p class="modal-message">Compartilhe sua experi√™ncia com a AutoPlat</p>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>‚≠ê Avalia√ß√£o</label>
                    <select id="reviewRating" style="width: 100%; padding: 16px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 14px; color: #ffffff; font-size: 16px;">
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 estrelas)</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (4 estrelas)</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê (3 estrelas)</option>
                        <option value="2">‚≠ê‚≠ê (2 estrelas)</option>
                        <option value="1">‚≠ê (1 estrela)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>üí¨ Coment√°rio</label>
                    <textarea class="form-textarea" id="reviewComment" placeholder="Conte-nos sobre sua experi√™ncia..."></textarea>
                </div>
            </div>
            <button class="btn" onclick="submitReview()">Enviar Avalia√ß√£o</button>
            <button class="btn btn-secondary" onclick="closeReviewModal()">Cancelar</button>
        </div>
    </div>

    <!-- Fake Review Modal -->
    <div class="modal" id="fakeReviewModal">
        <div class="modal-content">
            <div class="modal-icon">üé≠</div>
            <h3 class="modal-title">Criar Avalia√ß√£o Falsa</h3>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>üë§ Nome do Usu√°rio</label>
                    <input type="text" id="fakeReviewName" placeholder="Nome fict√≠cio">
                </div>
                <div class="input-group">
                    <label>‚≠ê Avalia√ß√£o</label>
                    <select id="fakeReviewRating" style="width: 100%; padding: 16px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(147, 51, 234, 0.3); border-radius: 14px; color: #ffffff; font-size: 16px;">
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 estrelas)</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (4 estrelas)</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê (3 estrelas)</option>
                        <option value="2">‚≠ê‚≠ê (2 estrelas)</option>
                        <option value="1">‚≠ê (1 estrela)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>üí¨ Coment√°rio</label>
                    <textarea class="form-textarea" id="fakeReviewComment" placeholder="Texto da avalia√ß√£o..."></textarea>
                </div>
            </div>
            <button class="btn" onclick="submitFakeReview()">Criar Avalia√ß√£o</button>
            <button class="btn btn-secondary" onclick="closeFakeReviewModal()">Cancelar</button>
        </div>
    </div>

    <!-- User Menu Modal -->
    <div class="modal" id="userMenuModal">
        <div class="modal-content">
            <div class="modal-icon">üë§</div>
            <h3 class="modal-title" id="userMenuName">Menu</h3>
            <div style="margin: 24px 0;">
                <button class="btn" onclick="openProfileEdit()">‚úèÔ∏è Editar Perfil</button>
                <button class="btn btn-secondary" onclick="logout()" style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); border: none; margin-top: 12px;">üö™ Sair</button>
            </div>
            <button class="btn btn-secondary" onclick="closeUserMenuModal()">Fechar</button>
        </div>
    </div>

    <!-- Profile Edit Modal -->
    <div class="modal" id="profileEditModal">
        <div class="modal-content profile-modal-content">
            <div class="modal-icon">‚úèÔ∏è</div>
            <h3 class="modal-title">Editar Perfil</h3>
            <div class="platform-request-form">
                <div class="input-group">
                    <label>üë§ Nome Completo</label>
                    <input type="text" id="editFullName" placeholder="Seu nome completo">
                </div>
                <div class="input-group">
                    <label>üéí N√∫mero de Matr√≠cula</label>
                    <input type="text" id="editRegistration" placeholder="Sua matr√≠cula">
                </div>
                <div class="input-group">
                    <label>üè´ Escola</label>
                    <input type="text" id="editSchool" placeholder="Sua escola">
                </div>
                <div class="profile-upload">
                    <div class="profile-preview" onclick="document.getElementById('editProfileImageInput').click()">
                        <span id="editProfilePreviewIcon">üì∑</span>
                        <img id="editProfilePreviewImg" style="display: none;">
                    </div>
                    <input type="file" id="editProfileImageInput" accept="image/*" onchange="previewEditProfileImage(event)" style="display: none;">
                </div>
            </div>
            <button class="btn" onclick="updateProfile()">Salvar Altera√ß√µes</button>
            <button class="btn btn-secondary" onclick="closeProfileEditModal()">Cancelar</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
